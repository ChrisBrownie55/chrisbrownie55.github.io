<template id='flip-card-template'>
  <article class='flip-card'>
    <input class='flip-card__checkbox' type='checkbox' />
    <figure class='content'>
      <slot>
        <!-- SVG goes in default slot -->
      </slot>
      <figcaption class='content__back'>
        <p class='content-back__years'>
          <!-- Fill with `years` attribute -->
        </p>
        <sup>yrs</sup>
      </figcaption>
    </figure>
    <h4 class='flip-card__name'>
      <!-- Fill with `title` attribute -->
    </h4>
  </article>

  <style>
    .flip-card {
      width: 100%;
      margin: 0;
      position: relative;
    }

    .flip-card__checkbox {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      cursor: pointer;
      z-index: 2;
      opacity: 0;
    }

    .flip-card__checkbox:checked+.content {
      transform: rotateY(180deg);
    }

    .skill-wrapper {
      transform-style: preserve-3d;
      will-change: transform;
      transition: transform 0.35s ease-in-out;
      width: calc(100% - 3rem);
      height: calc(100% - 3rem);
      padding: 1.5rem;
      position: relative;
      background: #2a2a2a;
      border-radius: 0.15rem;
    }

    svg {
      backface-visibility: hidden;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      font-family: "-apple-system", "BlinkMacSystemFont", "Segoe UI",
        "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue",
        "sans-serif";
      text-align: center;
      color: #eee;

      path {
        stroke-width: 0;
        stroke: none;
        stroke-dasharray: none;
      }

      &:not(.mobx) path {
        fill: var(--theme-primary);
        fill-rule: evenOdd;
      }
    }

    .skill-caption {
      backface-visibility: hidden;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      display: inline-block;
      transform: rotateY(180deg) translate(50%, -50%);
      color: #fff;
      font-size: 3rem;
      font-family: "Roboto", "-apple-system", "BlinkMacSystemFont",
        "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell",
        "Helvetica Neue", "sans-serif";
      font-weight: bold;
      width: calc(100% - 1rem);
      padding-right: 1rem;
      text-align: center;

      sup {
        font-size: 1rem;
        position: absolute;
        transform: translate(0.25rem, -0.125rem);
      }
    }
    }
  </style>
</template>

<script>
  class FlipCard extends HTMLElement {
    constructor() {
      super()

      const template = document.currentScript.ownerDocument.getElementById('flip-card-template')

      const shadowRoot = this.attachShadow({ mode: 'open' })
      shadowRoot.appendChild(template.content.cloneNode(true))
    }

    static get observedAttributes() {
      return ['title', 'years']
    }

    attributeChangedCallback(name, oldValue, newValue) {
      this[name] = newValue
    }

    set title(value) {
      this.shadowRoot.querySelector('.flip-card__name').textContent = value
    }

    set years(value) {
      this.shadowRoot.querySelector('.content-back__years').textContent = value
    }
  }

  customElements.define('flip-card', FlipCard)
</script>